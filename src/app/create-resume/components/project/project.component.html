<ion-content style="height:74vh;">
  <form [formGroup]="projectsForm" (ngSubmit)="submitProjects()">
    <ion-grid>
      <div class="projects-div">
        <ion-row>
          <ion-col size="11.3" style="height: 50px; border-radius: 8px;">
            <ion-text class="projects-text">Project Form</ion-text>
          </ion-col>
        </ion-row>

        <!-- Loop through each project form -->
        <div formArrayName="projects">
          <div *ngFor="let project of projects.controls; let i = index" [formGroupName]="i">
            <!-- Project Title -->
            <ion-row>
              <ion-col class="form-group">
                <ion-label class="required">Project Title</ion-label>
                <ion-input formControlName="project_title" class="form-control"></ion-input>
                <ion-text color="danger" *ngIf="project.get('project_title')?.touched && project.get('project_title')?.invalid">
                  Project Title is required.
                </ion-text>
              </ion-col>
            </ion-row>

            <!-- Role Field -->
            <ion-row>
              <ion-col class="form-group">
                <ion-label class="required">Role</ion-label>
                <ion-input formControlName="role" class="form-control"></ion-input>
                <ion-text color="danger" *ngIf="project.get('role')?.touched && project.get('role')?.invalid">
                  Role is required.
                </ion-text>
              </ion-col>
            </ion-row>

            <!-- Institute Field -->
            <ion-row>
              <ion-col class="form-group">
                <ion-label class="required">Institute/Company</ion-label>
                <ion-input formControlName="institute" class="form-control"></ion-input>
                <ion-text color="danger" *ngIf="project.get('institute')?.touched && project.get('institute')?.invalid">
                  Institute is required.
                </ion-text>
              </ion-col>
            </ion-row>

            <!-- Start and End Date -->
            <ion-row>
              <ion-col class="form-group">
                <ion-label class="required">Start Date</ion-label>
                <ion-input formControlName="start_date" class="form-control" type="date"></ion-input>
              </ion-col>
              <ion-col class="form-group">
                <ion-label class="required">End Date</ion-label>
                <ion-input formControlName="end_date" class="form-control" type="date"></ion-input>
              </ion-col>
            </ion-row>

            <!-- Checkbox for Currently Working -->
            <ion-row>
              <ion-col size="10" class="checkboxContainer" style="margin: 10px 10px;">
                <ion-checkbox formControlName="currently_working" class="styledCheckbox"></ion-checkbox>
                <ion-text class="textBehind">Are you currently working on it?</ion-text>
              </ion-col>
            </ion-row>
          </div>
        </div>

        <!-- Button to Add More Projects -->
        <ion-row>
          <ion-col>
            <ion-button expand="full" type="button" (click)="addProject()">Add Another Project</ion-button>
          </ion-col>
        </ion-row>

        <!-- Submit Button -->
        <ion-row>
          <ion-col>
            <ion-button expand="full" type="submit" [disabled]="projectsForm.invalid">Submit Projects</ion-button>
          </ion-col>
        </ion-row>
      </div>
    </ion-grid>
  </form>
</ion-content>
